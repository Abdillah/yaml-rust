<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Yaml-rust by chyh1990</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Yaml-rust</h1>
        <p class="header">A pure rust YAML implementation.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/chyh1990/yaml-rust/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/chyh1990/yaml-rust/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/chyh1990/yaml-rust">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/chyh1990">chyh1990</a></p>


      </header>
      <section>
        <h1>
<a id="yaml-rust" class="anchor" href="#yaml-rust" aria-hidden="true"><span class="octicon octicon-link"></span></a>yaml-rust</h1>

<p>The missing YAML 1.2 implementation for Rust.</p>

<p><a href="https://travis-ci.org/chyh1990/yaml-rust"><img src="https://travis-ci.org/chyh1990/yaml-rust.svg?branch=master" alt="Build Status"></a>
<a href="https://ci.appveyor.com/project/chyh1990/yaml-rust"><img src="https://ci.appveyor.com/api/projects/status/scf47535ckp4ylg4?svg=true" alt="Build status"></a></p>

<p><code>yaml-rust</code> is a pure Rust YAML 1.2 implementation without
any FFI and crate dependencies, which enjoys the memory safe 
property and other benefits from the Rust language. 
The parser is heavily influenced by <code>libyaml</code> and <code>yaml-cpp</code>.</p>

<p>This crate works on all Rust supported platforms and
Rust 1.0.0 and nightly!</p>

<p>NOTE: This library is still under heavily development.</p>

<h2>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Start</h2>

<p>Adding the following to the Cargo.toml in your project:</p>

<pre><code>[dependencies.yaml-rust]
git = "https://github.com/chyh1990/yaml-rust.git"
</code></pre>

<p>and import using <em>extern crate</em>:</p>

<div class="highlight highlight-rust"><pre><span class="pl-k">extern crate</span> <span class="pl-c1">yaml_rust</span><span class="pl-k">;</span></pre></div>

<p>Use <code>yaml::YamlLoader</code> to load the YAML documents and access it
as Vec/HashMap:</p>

<div class="highlight highlight-rust"><pre><span class="pl-k">extern crate</span> <span class="pl-c1">yaml_rust</span><span class="pl-k">;</span>
<span class="pl-k">use</span> yaml_rust::{YamlLoader<span class="pl-k">,</span> YamlEmitter}<span class="pl-k">;</span>

<span class="pl-k">fn</span> <span class="pl-en">main</span>() {
    <span class="pl-k">let</span> <span class="pl-smi">s</span> <span class="pl-k">=</span>
<span class="pl-s">"</span>
<span class="pl-s">foo:</span>
<span class="pl-s">    - list1</span>
<span class="pl-s">    - list2</span>
<span class="pl-s">bar:</span>
<span class="pl-s">    - 1</span>
<span class="pl-s">    - 2.0</span>
<span class="pl-s">"</span><span class="pl-k">;</span>
    <span class="pl-k">let</span> <span class="pl-smi">docs</span> <span class="pl-k">=</span> YamlLoader::<span class="pl-c1">load_from_str</span>(s)<span class="pl-k">.</span><span class="pl-c1">unwrap</span>()<span class="pl-k">;</span>

    <span class="pl-c">// Multi document support, doc is a yaml::Yaml</span>
    <span class="pl-k">let</span> <span class="pl-smi">doc</span> <span class="pl-k">=</span> <span class="pl-k">&amp;</span>docs[<span class="pl-c1">0</span>]<span class="pl-k">;</span>

    <span class="pl-c">// Debug support</span>
    <span class="pl-c1">println!</span>(<span class="pl-s">"{:?}"</span><span class="pl-k">,</span> doc)<span class="pl-k">;</span>

    <span class="pl-c">// Index access for map &amp; array</span>
    <span class="pl-c1">assert_eq!</span>(doc[<span class="pl-s">"foo"</span>][<span class="pl-c1">0</span>]<span class="pl-k">.</span><span class="pl-c1">as_str</span>()<span class="pl-k">.</span><span class="pl-c1">unwrap</span>()<span class="pl-k">,</span> <span class="pl-s">"list1"</span>)<span class="pl-k">;</span>
    <span class="pl-c1">assert_eq!</span>(doc[<span class="pl-s">"bar"</span>][<span class="pl-c1">1</span>]<span class="pl-k">.</span><span class="pl-c1">as_f64</span>()<span class="pl-k">.</span><span class="pl-c1">unwrap</span>()<span class="pl-k">,</span> <span class="pl-c1">2</span><span class="pl-k">.</span><span class="pl-c1">0</span>)<span class="pl-k">;</span>

    <span class="pl-c">// Chained key/array access is checked and won't panic,</span>
    <span class="pl-c">// return BadValue if they are not exist.</span>
    <span class="pl-c1">assert!</span>(doc[<span class="pl-s">"INVALID_KEY"</span>][<span class="pl-c1">100</span>]<span class="pl-k">.</span><span class="pl-c1">is_badvalue</span>())<span class="pl-k">;</span>

    <span class="pl-c">// Dump the YAML object</span>
    <span class="pl-k">let</span> <span class="pl-k">mut </span><span class="pl-smi">out_str</span> <span class="pl-k">=</span> String::<span class="pl-c1">new</span>()<span class="pl-k">;</span>
    {
        <span class="pl-k">let</span> <span class="pl-k">mut </span><span class="pl-smi">emitter</span> <span class="pl-k">=</span> YamlEmitter::<span class="pl-c1">new</span>(<span class="pl-k">&amp;</span><span class="pl-k">mut</span> out_str)<span class="pl-k">;</span>
        emitter<span class="pl-k">.</span><span class="pl-c1">dump</span>(doc)<span class="pl-k">.</span><span class="pl-c1">unwrap</span>()<span class="pl-k">;</span> <span class="pl-c">// dump the YAML object to a String</span>
    }
    <span class="pl-c1">println!</span>(<span class="pl-s">"{}"</span><span class="pl-k">,</span> out_str)<span class="pl-k">;</span>
}</pre></div>

<p>Note that <code>yaml::Yaml</code> implements <code>Index&lt;&amp;'a str&gt;</code> &amp; <code>Index&lt;usize&gt;</code>:</p>

<ul>
<li>
<code>Index&lt;usize&gt;</code> assumes the container is an Array</li>
<li>
<code>Index&lt;&amp;'a str&gt;</code> assumes the container is a string to value Map</li>
<li>otherwise, <code>Yaml::BadValue</code> is returned</li>
</ul>

<p>If your document does not conform to this convention (e.g. map with
complex type key), you can use the <code>Yaml::as_XXX</code> family API to access your
documents.</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Pure Rust</li>
<li>Ruby-like Array/Hash access API</li>
<li>Low-level YAML events emission</li>
</ul>

<h2>
<a id="specification-compliance" class="anchor" href="#specification-compliance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Specification Compliance</h2>

<p>This implementation aims to provide YAML parser fully compatible with
the YAML 1.2 specification. The pasrser can correctly parse almost all
examples in the specification, except for the following known bugs:</p>

<ul>
<li>Empty plain scalar in certain contexts</li>
</ul>

<p>However, the widely used library <code>libyaml</code> also fails to parse these examples,
so it may not be a huge problem for most users. </p>

<h2>
<a id="goals" class="anchor" href="#goals" aria-hidden="true"><span class="octicon octicon-link"></span></a>Goals</h2>

<ul>
<li>Encoder</li>
<li>Tag directive</li>
<li>Alias while desearilization</li>
</ul>

<h2>
<a id="contribution" class="anchor" href="#contribution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contribution</h2>

<p>Fork &amp; PR on Github.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
